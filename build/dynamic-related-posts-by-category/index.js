(()=>{"use strict";var e,t={51:()=>{const e=window.wp.blocks,t=window.wp.data,l=window.wp.i18n,o=window.wp.blockEditor,n=window.wp.components,a=window.wp.element,r=window.ReactJSXRuntime,s=JSON.parse('{"UU":"my-theme/related-posts-by-category"}'),i=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:(0,r.jsx)("path",{d:"M16 19H3v-2h13v2zm5-10H3v2h18V9zM3 5v2h11V5H3zm14 0v2h4V5h-4zm-6 8v2h10v-2H11zm-8 0v2h5v-2H3z"})});(0,e.registerBlockType)(s.UU,{icon:i,edit:(0,t.withSelect)(((e,t)=>{const{attributes:l}=t,{getEntityRecords:o,getCurrentPostId:n,getPostType:a}=e("core"),{getCurrentPostType:r}=e("core/editor"),s=n?.(),i=r?.();let d=[],c=[];if("post"===i){const t=e("core").getEditedEntityRecord("postType","post",s);t&&t.categories&&(d=t.categories),c=o("taxonomy","category",{per_page:-1})||[]}const m={per_page:l.postsToShow,_embed:!0,order:l.order,orderby:l.orderBy,exclude:l.excludeCurrentPost?[s]:[]};return"current"===l.categoryFiltering&&d.length>0?m.categories=d:"specific"===l.categoryFiltering&&l.specificCategories.length>0&&(m.categories=l.specificCategories),{relatedPosts:o("postType","post",m)||[],currentPostId:s,currentPostCategories:d,allCategories:c,postType:a?.(i)}}))((function({attributes:e,setAttributes:t,relatedPosts:s,currentPostId:i,currentPostCategories:d,allCategories:c,postType:m}){const{postsToShow:h,showFeaturedImage:g,showExcerpt:u,showDate:p,showCategories:_,showAuthor:y,excludeCurrentPost:x,orderBy:b,order:w,layout:j,columns:v,enablePagination:C,categoryFiltering:f,specificCategories:P,imageSize:S,excerptLength:T}=e,[R,N]=(0,a.useState)([]);(0,a.useEffect)((()=>{if(c&&P.length>0){const e=P.map((e=>{const t=c.find((t=>t.id===e));return t?t.name:""})).filter(Boolean);N(e)}}),[c,P]);const k=(0,o.useBlockProps)({className:`related-posts-layout-${j} columns-${v}`}),O=[{label:(0,l.__)("List","my-theme"),value:"list"},{label:(0,l.__)("Grid","my-theme"),value:"grid"},{label:(0,l.__)("Card","my-theme"),value:"card"}],B=[{label:(0,l.__)("Date","my-theme"),value:"date"},{label:(0,l.__)("Title","my-theme"),value:"title"},{label:(0,l.__)("Random","my-theme"),value:"rand"},{label:(0,l.__)("Comment Count","my-theme"),value:"comment_count"}],E=[{label:(0,l.__)("Descending","my-theme"),value:"desc"},{label:(0,l.__)("Ascending","my-theme"),value:"asc"}],F=[{label:(0,l.__)("Thumbnail","my-theme"),value:"thumbnail"},{label:(0,l.__)("Medium","my-theme"),value:"medium"},{label:(0,l.__)("Large","my-theme"),value:"large"},{label:(0,l.__)("Full","my-theme"),value:"full"}],I=null===s,L=Array.isArray(s)&&0===s.length;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.InspectorControls,{children:(0,r.jsxs)(n.Panel,{children:[(0,r.jsxs)(n.PanelBody,{title:(0,l.__)("Content Settings","my-theme"),initialOpen:!0,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.__experimentalNumberControl,{label:(0,l.__)("Number of posts to show","my-theme"),labelPosition:"top",value:h,onChange:e=>t({postsToShow:parseInt(e)}),min:1,max:20})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.RadioControl,{label:(0,l.__)("Category Filtering","my-theme"),selected:f,options:[{label:(0,l.__)("Use current post's categories","my-theme"),value:"current"},{label:(0,l.__)("Select specific categories","my-theme"),value:"specific"},{label:(0,l.__)("Show all categories","my-theme"),value:"all"}],onChange:e=>t({categoryFiltering:e})})}),"specific"===f&&c&&(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.FormTokenField,{label:(0,l.__)("Select Categories","my-theme"),value:R,suggestions:c?c.map((e=>e.name)):[],onChange:e=>{if(!c)return;const l=c.map((e=>e.name)),o=e.filter((e=>l.includes(e)));N(o);const n=o.map((e=>{const t=c.find((t=>t.name===e));return t?t.id:null})).filter(Boolean);t({specificCategories:n})},maxSuggestions:20})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.SelectControl,{label:(0,l.__)("Order By","my-theme"),value:b,options:B,onChange:e=>t({orderBy:e})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.SelectControl,{label:(0,l.__)("Order","my-theme"),value:w,options:E,onChange:e=>t({order:e})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Exclude Current Post","my-theme"),checked:x,onChange:()=>t({excludeCurrentPost:!x})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Enable Pagination","my-theme"),checked:C,onChange:()=>t({enablePagination:!C})})})]}),(0,r.jsxs)(n.PanelBody,{title:(0,l.__)("Layout Settings","my-theme"),initialOpen:!1,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.RadioControl,{label:(0,l.__)("Layout Style","my-theme"),selected:j,options:O,onChange:e=>t({layout:e})})}),"list"!==j&&(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.RangeControl,{label:(0,l.__)("Columns","my-theme"),value:v,onChange:e=>t({columns:e}),min:1,max:4})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.SelectControl,{label:(0,l.__)("Image Size","my-theme"),value:S,options:F,onChange:e=>t({imageSize:e})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.__experimentalNumberControl,{label:(0,l.__)("Excerpt Length (words)","my-theme"),labelPosition:"top",value:T,onChange:e=>t({excerptLength:parseInt(e)}),min:10,max:100})})]}),(0,r.jsxs)(n.PanelBody,{title:(0,l.__)("Display Settings","my-theme"),initialOpen:!1,children:[(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Show Featured Image","my-theme"),checked:g,onChange:()=>t({showFeaturedImage:!g})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Show Excerpt","my-theme"),checked:u,onChange:()=>t({showExcerpt:!u})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Show Date","my-theme"),checked:p,onChange:()=>t({showDate:!p})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Show Categories","my-theme"),checked:_,onChange:()=>t({showCategories:!_})})}),(0,r.jsx)(n.PanelRow,{children:(0,r.jsx)(n.ToggleControl,{label:(0,l.__)("Show Author","my-theme"),checked:y,onChange:()=>t({showAuthor:!y})})})]})]})}),(0,r.jsx)("div",{...k,children:I?(0,r.jsx)(n.Placeholder,{icon:"update",label:(0,l.__)("Loading related posts...","my-theme"),children:(0,r.jsx)(n.Spinner,{})}):L?(0,r.jsx)(n.Placeholder,{icon:"warning",label:(0,l.__)("No related posts found","my-theme"),children:(0,r.jsx)("p",{children:"current"===f?(0,l.__)("Try changing the category filtering options or increasing the number of posts to show.","my-theme"):(0,l.__)("Try changing the filtering options or increasing the number of posts to show.","my-theme")})}):(0,r.jsxs)("div",{className:`related-posts-container ${j}-layout`,children:[(0,r.jsx)("div",{className:`related-posts-grid columns-${v}`,children:s.map((e=>{const t=e._embedded&&e._embedded["wp:featuredmedia"]&&e._embedded["wp:featuredmedia"][0],o=e._embedded&&e._embedded["wp:term"]&&e._embedded["wp:term"][0],n=e._embedded&&e._embedded.author&&e._embedded.author[0];return(0,r.jsxs)("article",{className:"related-post",children:[g&&t&&t.source_url&&(0,r.jsx)("div",{className:"related-post-image",children:(0,r.jsx)("img",{src:t.media_details.sizes[S]?.source_url||t.source_url,alt:t.alt_text||e.title.rendered})}),(0,r.jsxs)("div",{className:"related-post-content",children:[(0,r.jsx)("h3",{className:"related-post-title",children:(0,r.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),children:e.title.rendered?(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:e.title.rendered}}):(0,l.__)("(No title)","my-theme")})}),_&&o&&o.length>0&&(0,r.jsx)("div",{className:"related-post-categories",children:o.map(((e,t)=>(0,r.jsxs)("span",{className:"related-post-category",children:[e.name,t<o.length-1?", ":""]},e.id)))}),p&&(0,r.jsx)("div",{className:"related-post-date",children:new Date(e.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),y&&n&&(0,r.jsxs)("div",{className:"related-post-author",children:[(0,l.__)("By","my-theme")," ",n.name]}),u&&e.excerpt&&(0,r.jsx)("div",{className:"related-post-excerpt",children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e.excerpt.rendered.split(" ").slice(0,T).join(" ")+"..."}})})]})]},e.id)}))}),C&&(0,r.jsx)("div",{className:"related-posts-pagination",children:(0,r.jsx)("span",{className:"pagination-text",children:(0,l.__)("Pagination will be enabled on the frontend","my-theme")})})]})})]})}))})}},l={};function o(e){var n=l[e];if(void 0!==n)return n.exports;var a=l[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,l,n,a)=>{if(!l){var r=1/0;for(c=0;c<e.length;c++){for(var[l,n,a]=e[c],s=!0,i=0;i<l.length;i++)(!1&a||r>=a)&&Object.keys(o.O).every((e=>o.O[e](l[i])))?l.splice(i--,1):(s=!1,a<r&&(r=a));if(s){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[l,n,a]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={636:0,772:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var n,a,[r,s,i]=l,d=0;if(r.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(i)var c=i(o)}for(t&&t(l);d<r.length;d++)a=r[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},l=globalThis.webpackChunkmy_theme=globalThis.webpackChunkmy_theme||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=o.O(void 0,[772],(()=>o(51)));n=o.O(n)})();